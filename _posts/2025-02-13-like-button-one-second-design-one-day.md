---
title: "ðŸ‘ ì¢‹ì•„ìš” ë²„íŠ¼ ëˆ„ë¥´ëŠ” ê±´ 1ì´ˆ, ì„¤ê³„í•˜ëŠ” ê±´ í•˜ë£¨"
date: 2025-02-13 23:00:00 +0900
categories: [Development, Architecture]
tags: [e-commerce, like, soft-delete, idempotency, redis, kotlin]
image:
  path: /assets/img/posts/2025-02-13-cover.jpg
---

> **TL;DR** ðŸ’¡ ì¢‹ì•„ìš” ê¸°ëŠ¥ì„ ì„¤ê³„í•˜ë©´ì„œ ì‚­ì œ ì „ëžµ, ì¤‘ë³µ ìš”ì²­(ë”°ë‹¥) ì²˜ë¦¬, ìƒí’ˆ ìƒíƒœ ë¶„ë¦¬ê¹Œì§€ ê³ ë¯¼ì´ ê¼¬ë¦¬ë¥¼ ë¬¼ì—ˆë‹¤. 'ë‹¨ìˆœí•œ ê¸°ëŠ¥'ì€ ì—†ì—ˆë‹¤.
{: .prompt-tip }

## ðŸ‘ ì¢‹ì•„ìš” í•˜ë‚˜ì¯¤ì´ì•¼

ì´ì»¤ë¨¸ìŠ¤ ì„¤ê³„ ê³¼ì œì—ì„œ ì¢‹ì•„ìš” ê¸°ëŠ¥ì„ ì ‘í–ˆë‹¤. ì²˜ìŒì—” `likes` í…Œì´ë¸” í•˜ë‚˜ ë§Œë“¤ê³  INSERT/DELETE í•˜ë©´ ë˜ëŠ” ê±° ì•„ë‹Œê°€?'ë¼ê³  ìƒê°í–ˆë‹¤.

ê·¼ë° ë§‰ìƒ ì„¤ê³„ë¥¼ ì‹œìž‘í•˜ë‹ˆê¹Œ ì§ˆë¬¸ì´ ëë„ ì—†ì´ ë‚˜ì™”ë‹¤.

- ì·¨ì†Œí•˜ë©´ ì§„ì§œ ì§€ì›Œ? ë‚¨ê²¨ë‘¬?
- ê°™ì€ ë²„íŠ¼ ë‘ ë²ˆ ëˆŒë¦¬ë©´?
- ì¢‹ì•„ìš” ëˆ„ë¥¸ ìƒí’ˆì´ í’ˆì ˆì´ë©´ ì–´ë–»ê²Œ ë³´ì—¬ì¤˜?

í•˜ë‚˜ì”© ì •ë¦¬í•˜ë‹¤ ë³´ë‹ˆ í•˜ë£¨ê°€ ê°”ë‹¤.

---

## 1. ðŸ—‘ï¸ ì§€ìš¸ ê±°ì•¼, ë‚¨ê¸¸ ê±°ì•¼

ì¢‹ì•„ìš” ì·¨ì†Œë¥¼ ëˆ„ë¥´ë©´ DBì—ì„œ ì–´ë–»ê²Œ ì²˜ë¦¬í• ì§€. ë‘ ê°€ì§€ ì„ íƒì§€ê°€ ìžˆì—ˆë‹¤.

**Soft Delete** â€” `deleted_at`ì— ì‹œê°„ë§Œ ì°ê³  í–‰ì€ ë‚¨ê²¨ë‘ . ì´ë ¥ì´ ë³´ì¡´ë˜ë‹ˆê¹Œ ë‚˜ì¤‘ì— ì¶”ì²œ/ëž­í‚¹ ë°ì´í„°ë¡œ í™œìš© ê°€ëŠ¥.

**Hard Delete** â€” ë¬¼ë¦¬ ì‚­ì œ. í…Œì´ë¸”ì´ ê¹”ë”í•˜ì§€ë§Œ ì·¨ì†Œ ì´ë ¥ì´ ì‚¬ë¼ì§.

ì¢‹ì•„ìš” íŠ¹ì„±ìƒ ë“±ë¡/ì·¨ì†Œê°€ ë¹ˆë²ˆí•˜ë‹¤. Soft Deleteë¡œ ê°€ë©´ UK(Unique Key) ì„¤ê³„ê°€ ê·€ì°®ì•„ì§„ë‹¤.

`UNIQUE (user_id, product_id)`ë¡œ ìž¡ìœ¼ë©´ deleted_atì´ ì°ížŒ í–‰ ë•Œë¬¸ì— ìž¬ë“±ë¡ì´ ë§‰ížŒë‹¤. ê·¸ë ‡ë‹¤ê³  `UNIQUE (user_id, product_id, deleted_at)`ìœ¼ë¡œ ìž¡ìœ¼ë©´? MySQLì—ì„œ NULLì€ UK ì¤‘ë³µ ì²´í¬ì—ì„œ ë¹ ì§€ê¸° ë•Œë¬¸ì— ì˜ë„ëŒ€ë¡œ ë™ìž‘í•˜ì§€ ì•Šì„ ìˆ˜ ìžˆë‹¤.

ê±°ê¸°ë‹¤ ëª¨ë“  ì¡°íšŒ ì¿¼ë¦¬ì— `WHERE deleted_at IS NULL`ì„ ë¹¼ë¨¹ìœ¼ë©´ ì‚­ì œëœ ë°ì´í„°ê°€ ì„žì—¬ ë‚˜ì˜¨ë‹¤.

ìš”êµ¬ì‚¬í•­ì— 'ì¢‹ì•„ìš” ë°ì´í„°ëŠ” í–¥í›„ ì¶”ì²œ/ëž­í‚¹ ê¸°ì´ˆ ë°ì´í„°ë¡œ í™œìš© ê°€ëŠ¥'ì´ë¼ëŠ” ë¬¸ìž¥ì´ ìžˆì–´ì„œ ì¢€ ê±¸ë ¸ë‹¤. ì´ë ¥ì´ ì—†ìœ¼ë©´ í–‰ë™ íŒ¨í„´ ë¶„ì„ì„ ëª» í•˜ë‹ˆê¹Œ.

ê·¼ë° ë‹¤ì‹œ ìƒê°í•´ë³´ë‹ˆ, ì¶”ì²œ/ëž­í‚¹ì— í•„ìš”í•œ ê±´ **'ì§€ê¸ˆ ëˆ„ê°€ ë­˜ ì¢‹ì•„ìš” í•˜ê³  ìžˆëŠ”ì§€'**ì´ì§€, '3ì¼ ì „ì— ëˆŒë €ë‹¤ ì·¨ì†Œí–ˆë‹¤' ê°™ì€ ì´ë ¥ì€ ì•„ë‹Œ ê²ƒ ê°™ë‹¤. í–‰ë™ íŒ¨í„´ ë¶„ì„ì´ ì •ë§ í•„ìš”í•´ì§€ë©´, likes í…Œì´ë¸”ì„ ê±´ë“œë¦¬ëŠ” ê²Œ ì•„ë‹ˆë¼ ë³„ë„ ì´ë²¤íŠ¸ í…Œì´ë¸”ì„ ì¶”ê°€í•˜ëŠ” ê²Œ ë§žì§€ ì•Šì„ê¹Œ.

íšŒì‚¬ ì½”ë“œ(`favorite_goods`)ë„ í™•ì¸í•´ë´¤ëŠ”ë° ë¬¼ë¦¬ ì‚­ì œ ë°©ì‹ì´ì—ˆë‹¤.

> **ê²°ë¡ : Hard Delete.** ì¢‹ì•„ìš”ì˜ í•µì‹¬ ê°€ì¹˜ëŠ” 'í˜„ìž¬ ìƒíƒœ'ì´ì§€ 'ì´ë ¥'ì´ ì•„ë‹ˆë¼ê³  íŒë‹¨í–ˆë‹¤.
{: .prompt-info }

---

## 2. ðŸ–±ï¸ ë”°ë‹¥ â€” ê°™ì€ ë²„íŠ¼ ë‘ ë²ˆ ëˆŒë ¸ì„ ë•Œ

ì¢‹ì•„ìš” ë²„íŠ¼ì„ ë¹ ë¥´ê²Œ ë‘ ë²ˆ ëˆ„ë¥´ëŠ” ê²½ìš°. í”„ë¡ íŠ¸ì—ì„œ ë§‰ì•„ì•¼ í•˜ëŠ” ê±° ì•„ë‹ˆëƒê³  í•  ìˆ˜ ìžˆëŠ”ë°, ë°±ì—”ë“œëŠ” 'í”„ë¡ íŠ¸ê°€ ì•ˆ ë§‰ì•˜ì„ ë•Œ'ë„ ëŒ€ë¹„í•´ì•¼ í•œë‹¤ê³  ìƒê°í•œë‹¤.

### ì¼ë‹¨ ì¤‘ë³µì´ë©´ ë­˜ ë°˜í™˜í• ì§€

ì´ë¯¸ ì¢‹ì•„ìš”í•œ ìƒí’ˆì— ë‹¤ì‹œ POSTê°€ ì˜¤ë©´?

- **A: í† ê¸€** â€” ìžˆìœ¼ë©´ ì‚­ì œ, ì—†ìœ¼ë©´ ìƒì„±. UXëŠ” ê°„ë‹¨í•œë° POST/DELETE ì˜ë¯¸ê°€ ëª¨í˜¸í•´ì§
- **B: 200 OK** â€” ì´ë¯¸ ìžˆì–´ë„ ì„±ê³µ ë°˜í™˜. ë©±ë“±ì ì´ë¼ ìž¬ì‹œë„ì— ì•ˆì „. ê·¼ë° ì‹ ê·œ ìƒì„±ì´ëž‘ êµ¬ë¶„ì´ ì•ˆ ë¨
- **C: 409 CONFLICT** â€” ì´ë¯¸ ì¡´ìž¬í•˜ë©´ ì—ëŸ¬. HTTP ìŠ¤íŽ™ì— ì¶©ì‹¤

**Cì•ˆ(409)ì„ ì„ íƒí–ˆë‹¤.** POSTëŠ” 'ìƒì„±'ì´ë‹ˆê¹Œ ì´ë¯¸ ìžˆìœ¼ë©´ ì¶©ëŒì´ë¼ê³  ìƒê°í–ˆë‹¤. ë‹¤ë§Œ Bì•ˆ(200)ë„ í‹€ë¦° ê±´ ì•„ë‹Œ ê²ƒ ê°™ê³ , ì´ê±´ ì¢€ ì •ë‹µì´ ì—†ëŠ” ì˜ì—­ì´ë¼ê³  ëŠê¼ˆë‹¤.

### 409ë¡œ ëì´ ì•„ë‹ˆë‹¤

ë¬¸ì œëŠ” íƒ€ì´ë°ì´ë‹¤. ê±°ì˜ ë™ì‹œì— ë‘ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´:

```
ìš”ì²­ A: SELECT â†’ ì—†ìŒ â†’ INSERT â† ì„±ê³µ
ìš”ì²­ B: SELECT â†’ ì—†ìŒ â†’ INSERT â† ???
```

ìš”ì²­ Bê°€ SELECTí•˜ëŠ” ì‹œì ì— Aì˜ INSERTê°€ ì•„ì§ ì»¤ë°‹ ì•ˆ ëìœ¼ë©´, Bë„ 'ì—†ìŒ'ìœ¼ë¡œ íŒë‹¨í•˜ê³  INSERTë¥¼ ì‹œë„í•œë‹¤.

ì—¬ê¸°ì„œ DBì˜ Unique Keyê°€ ìµœì¢… ë°©ì–´ì„  ì—­í• ì„ í•œë‹¤:

```sql
ALTER TABLE likes ADD CONSTRAINT uk_likes UNIQUE (user_id, product_id);
```

Bì˜ INSERTê°€ UK ìœ„ë°˜ìœ¼ë¡œ `DataIntegrityViolationException`ì´ í„°ì§€ë©´, ì´ê±¸ ìž¡ì•„ì„œ 409 CONFLICTë¡œ ë³€í™˜í•˜ë©´ ëœë‹¤.

### ê·¸ëŸ°ë° ë§¤ë²ˆ DBê¹Œì§€ ê°€ì•¼ í•´?

íšŒì‚¬ì—ì„œ ë¹„ìŠ·í•œ ë¬¸ì œë¥¼ Redisë¡œ í•´ê²°í•œ ê²½í—˜ì´ ìžˆë‹¤. `@Cooldown`ì´ë¼ëŠ” ì»¤ìŠ¤í…€ ì–´ë…¸í…Œì´ì…˜ì„ ë§Œë“¤ì–´ì„œ ì¼ë‹¤.

Cooldownì€ ê²Œìž„ì—ì„œ ìŠ¤í‚¬ ì“´ ë‹¤ìŒ ì¼ì • ì‹œê°„ ë™ì•ˆ ìž¬ì‚¬ìš©ì´ ì•ˆ ë˜ëŠ” ê·¸ 'ì¿¨íƒ€ìž„'ì—ì„œ ë”°ì˜¨ ì´ë¦„ì´ë‹¤. ê°™ì€ ìš”ì²­ì´ ì§§ì€ ì‹œê°„ ì•ˆì— ë°˜ë³µë˜ë©´, ì¿¨íƒ€ìž„ì´ ì•ˆ ëë‚¬ìœ¼ë‹ˆê¹Œ ë¬´ì‹œí•˜ëŠ” ê°œë….

êµ¬ì¡°ëŠ” **AOP + Redis + SpEL** ì¡°í•©ì´ë‹¤:

```java
@Cooldown(key = RECENT_GOODS, value = "'target:' + #goodsId + ':buyer:' + #buyerId", ttl = 3)
public void addRecentGoods(Long goodsId, Long buyerId) {
    // ...
}
```

`@Cooldown`ì„ ë©”ì„œë“œì— ë¶™ì´ë©´ AOP(`CooldownAspect`)ê°€ ê°€ë¡œì±ˆë‹¤. `value`ì— SpEL í‘œí˜„ì‹ì„ ì“¸ ìˆ˜ ìžˆì–´ì„œ, ë©”ì„œë“œ íŒŒë¼ë¯¸í„°ë¥¼ ì¡°í•©í•´ ë™ì ìœ¼ë¡œ í‚¤ë¥¼ ë§Œë“ ë‹¤. ìœ„ ì˜ˆì‹œì—ì„œëŠ” `RECENT_GOODS:target:123:buyer:456` ê°™ì€ í‚¤ê°€ ìƒì„±ëœë‹¤.

í•µì‹¬ì€ `CooldownService.acquire()`:

```java
public boolean acquire(String key, Duration ttl) {
    return Boolean.TRUE.equals(
        redisTemplate.opsForValue().setIfAbsent(key, "1", ttl)
    );
}
```

Redisì˜ `setIfAbsent`ëŠ” `SETNX` ëª…ë ¹ì–´ì— ëŒ€ì‘í•œë‹¤. **í‚¤ê°€ ì—†ìœ¼ë©´ ì„¸íŒ…í•˜ê³  `true`, ì´ë¯¸ ìžˆìœ¼ë©´ ì•„ë¬´ê²ƒë„ ì•ˆ í•˜ê³  `false`**. ì´ê²Œ ì›ìžì (atomic)ìœ¼ë¡œ ë™ìž‘í•˜ê¸° ë•Œë¬¸ì— ë™ì‹œ ìš”ì²­ì´ ì™€ë„ ë”± í•˜ë‚˜ë§Œ í†µê³¼í•œë‹¤. TTLì„ ê°™ì´ ê±¸ì–´ì„œ, 3ì´ˆê°€ ì§€ë‚˜ë©´ í‚¤ê°€ ìžë™ ì‚­ì œë˜ê³  ë‹¤ì‹œ ìš”ì²­í•  ìˆ˜ ìžˆë‹¤.

AOPì—ì„œëŠ” `acquire()`ì˜ ê²°ê³¼ì— ë”°ë¼ ë¶„ê¸°í•œë‹¤:

```java
// CooldownAspect.java (í•µì‹¬ë§Œ)
boolean firstHit;
try {
    firstHit = cooldownService.acquire(key, Duration.ofSeconds(cooldown.ttl()));
} catch (Exception e) {
    log.warn("Redis ìž¥ì•  ë°œìƒ â€“ ì¤‘ë³µ ìš”ì²­ ì œì–´ ë¶ˆê°€. key={}", key);
    firstHit = true;  // Redis ìž¥ì•  ì‹œ â†’ ê·¸ëƒ¥ í†µê³¼ (ê°€ìš©ì„± ìš°ì„ )
}

if (!firstHit) {
    return null;  // ì¿¨íƒ€ìž„ ì•ˆ ëë‚¨ â†’ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì‹¤í–‰ ì•ˆ í•¨
}
return pjp.proceed();  // ì²« ìš”ì²­ â†’ ì •ìƒ ì‹¤í–‰
```

Redisê°€ ì£½ì–´ë„ ì„œë¹„ìŠ¤ê°€ ë©ˆì¶”ë©´ ì•ˆ ë˜ë‹ˆê¹Œ `catch`ì—ì„œ `firstHit = true`ë¡œ ë¹ ì§„ë‹¤. ë”°ë‹¥ ë°©ì§€ë³´ë‹¤ ê°€ìš©ì„±ì´ ë” ì¤‘ìš”í•˜ë‹¤ëŠ” íŒë‹¨ì´ì—ˆë‹¤.

ì¢‹ì•„ìš”ì— ì ìš©í•˜ë©´ ì´ëŸ° 3ì¤‘ ë°©ì–´ê°€ ëœë‹¤:

| ë ˆì´ì–´ | ë°©ì–´ ìˆ˜ë‹¨ | ì—­í•  |
|--------|----------|------|
| **1ì°¨** | Redis `SETNX like:{userId}:{productId}` TTL 3ì´ˆ | ë”°ë‹¥(ì—°íƒ€) ì°¨ë‹¨ â€” DBê¹Œì§€ ì•ˆ ê° |
| **2ì°¨** | Serviceì—ì„œ `SELECT EXISTS` | ì •ìƒì ì¸ ì¤‘ë³µ ìš”ì²­ 409 ë°˜í™˜ |
| **3ì°¨** | DB `UNIQUE (user_id, product_id)` | ìµœì¢… ë°©ì–´ì„  â€” Race Condition ëŒ€ë¹„ |

1ì°¨ê°€ ì—†ìœ¼ë©´ ë”°ë‹¥ ìš”ì²­ì´ ì „ë¶€ DBê¹Œì§€ ë‚´ë ¤ê°„ë‹¤. 3ì°¨ê°€ ì—†ìœ¼ë©´ Redis ìž¥ì•  ì‹œ ì¤‘ë³µ ì‚½ìž…ì´ ë°œìƒí•  ìˆ˜ ìžˆë‹¤. í•œ ê²¹ë§Œìœ¼ë¡œëŠ” ë¶ˆì•ˆí•˜ë‹¤.

---

## 3. ðŸ·ï¸ í’ˆì ˆì¸ë° ë³´ì—¬ì¤˜ì•¼ í•´?

ì¢‹ì•„ìš” ëˆ„ë¥¸ ìƒí’ˆì´ í’ˆì ˆì´ ëë‹¤. ì¢‹ì•„ìš” ëª©ë¡ì—ì„œ ê·¸ ìƒí’ˆì„ ì–´ë–»ê²Œ ë³´ì—¬ì¤˜ì•¼ í• ê¹Œ?

ì²˜ìŒì—” 'í’ˆì ˆì´ë©´ ëª©ë¡ì—ì„œ ë¹¼ë©´ ë˜ì§€'ë¼ê³  ìƒê°í–ˆë‹¤. ê·¼ë° ë‚´ê°€ ì°œí•´ë‘” ìƒí’ˆì´ ì–´ëŠ ë‚  ê°‘ìžê¸° ì‚¬ë¼ì ¸ ìžˆìœ¼ë©´? ì‚¬ìš©ìž ìž…ìž¥ì—ì„œëŠ” ë‹¹í™©ìŠ¤ëŸ½ë‹¤. ê·¸ëŸ°ë° ì‡¼í•‘ëª°ì—ì„œ ì‹¤ì œë¡œ ì–´ë–»ê²Œ í•˜ëŠ”ì§€ ë– ì˜¬ë ¤ë³´ë©´:

![ë¬´ì‹ ì‚¬ í’ˆì ˆ ìƒí’ˆ ë”¤ ì²˜ë¦¬ ì˜ˆì‹œ](/assets/img/posts/musinsa-soldout-dim.png)
_ë¬´ì‹ ì‚¬ â€” í’ˆì ˆ ìƒí’ˆì€ íšŒìƒ‰ ì˜¤ë²„ë ˆì´ + 'í’ˆì ˆ' ë±ƒì§€ë¡œ í‘œì‹œëœë‹¤_

**í’ˆì ˆì´ì–´ë„ ëª©ë¡ì—ëŠ” ë³´ì—¬ì¤€ë‹¤.** ë‹¤ë§Œ ì´ë¯¸ì§€ê°€ ì–´ë‘¡ê²Œ(ë”¤ ì²˜ë¦¬) ë˜ê³  `í’ˆì ˆ` ë±ƒì§€ê°€ ë¶™ëŠ”ë‹¤.

ì´ê±¸ DB ì„¤ê³„ë¡œ ì˜®ê¸°ë©´, ìƒí’ˆì— ë‘ ê°€ì§€ ì˜ì‚¬ê²°ì •ì´ í•„ìš”í•˜ë‹¤:

- **íŒë§¤ ê°€ëŠ¥ ì—¬ë¶€** â€” êµ¬ë§¤ ë²„íŠ¼ì´ í™œì„±í™”ë˜ëŠ”ê°€?
- **ëª©ë¡ ë…¸ì¶œ ì—¬ë¶€** â€” ìƒí’ˆ ëª©ë¡ì— ë³´ì´ëŠ”ê°€?

ì´ ë‘ ê°œë¥¼ `status` í•˜ë‚˜ë¡œ í‰ì¹˜ë©´ 'ë³´ì´ì§€ë§Œ êµ¬ë§¤ ë¶ˆê°€' ìƒíƒœë¥¼ í‘œí˜„í•  ìˆ˜ê°€ ì—†ë‹¤.

```
status = ACTIVE     â†’ êµ¬ë§¤ ê°€ëŠ¥ + ë…¸ì¶œ
status = INACTIVE   â†’ êµ¬ë§¤ ë¶ˆê°€ + ???
```

INACTIVEì¸ë° ë³´ì—¬ì¤˜ì•¼ í•˜ë‚˜, ìˆ¨ê²¨ì•¼ í•˜ë‚˜? statusë§Œìœ¼ë¡œëŠ” ë‹µì´ ì•ˆ ë‚˜ì˜¨ë‹¤.

ê·¸ëž˜ì„œ **status + displayYnì„ ë¶„ë¦¬**í–ˆë‹¤:

| status | displayYn | ëª©ë¡ ë…¸ì¶œ | êµ¬ë§¤ ê°€ëŠ¥ | UI |
|--------|-----------|----------|----------|-----|
| ACTIVE | true | âœ… | âœ… | ì¼ë°˜ ìƒí’ˆ ì¹´ë“œ |
| ACTIVE | false | âŒ | âœ… (URL ì§ì ‘) | ê´€ë¦¬ìžê°€ ì˜ë„ì ìœ¼ë¡œ ìˆ¨ê¸´ ìƒíƒœ |
| INACTIVE | true | âœ… | âŒ | **ë”¤ ì²˜ë¦¬ + 'íŒë§¤ì¤‘ì§€' ë±ƒì§€** |
| INACTIVE | false | âŒ | âŒ | ì™„ì „ ë¯¸ë…¸ì¶œ |

í”„ë¡ íŠ¸ì—ì„œëŠ” ì´ ë‘ í•„ë“œë¥¼ ì¡°í•©í•´ì„œ UIë¥¼ ë¶„ê¸°í•  ìˆ˜ ìžˆë‹¤:

```
displayYn = false              â†’ ëª©ë¡ì—ì„œ ì œì™¸
displayYn = true, ACTIVE       â†’ ì •ìƒ ìƒí’ˆ ì¹´ë“œ
displayYn = true, INACTIVE     â†’ ë”¤ì²˜ë¦¬ + 'íŒë§¤ì¤‘ì§€' ë¼ë²¨
```

'ì´ê±° ì˜¤ë²„ì—”ì§€ë‹ˆì–´ë§ ì•„ë‹ˆì•¼?'ë¼ëŠ” ìƒê°ë„ ë“¤ì—ˆë‹¤. ê³¼ì œ ë²”ìœ„ì—ì„œ ë”¤ ì²˜ë¦¬ê°€ ì‹¤ì œë¡œ í•„ìš”í•œ ê±´ ì•„ë‹ˆë‹ˆê¹Œ.

ê·¼ë° Shopify, Amazon, ë„¤ì´ë²„, ì¿ íŒ¡ ì „ë¶€ ì°¾ì•„ë´¤ëŠ”ë°, ì„±ìˆ™í•œ í”Œëž«í¼ì€ ëŒ€ë¶€ë¶„ status â‰  visibilityë¥¼ ë¶„ë¦¬í•´ì„œ ê´€ë¦¬í•˜ê³  ìžˆì—ˆë‹¤. ë°©í–¥ì„±ì€ í‹€ë¦¬ì§€ ì•Šì•˜ë‹¤ê³  ìƒê°í•œë‹¤.

> displayYn ë„¤ì´ë°ë„ ê³ ë¯¼ì´ ìžˆì—ˆë‹¤. Kotlinì—ì„œ `isDisplay`ë¡œ í•˜ë©´ Jackson ì§ë ¬í™” ì‹œ `display`ë¡œ ë³€í™˜ë˜ëŠ” ì•Œë ¤ì§„ ë²„ê·¸([jackson-module-kotlin #80](https://github.com/FasterXML/jackson-module-kotlin/issues/80))ê°€ ìžˆë‹¤. í•œêµ­ ì´ì»¤ë¨¸ìŠ¤ ê´€ë¡€ë¥¼ ë”°ë¼ `Yn` ì ‘ë¯¸ì‚¬ë¡œ ê°”ë‹¤.
{: .prompt-warning }

---

## ðŸ“ ëŒì•„ë³´ë©´

ì¢‹ì•„ìš” ê¸°ëŠ¥ í•˜ë‚˜ì—ì„œ ë‚˜ì˜¨ ê³ ë¯¼ë“¤:

1. **ì‚­ì œ ì „ëžµ** â€” Hard Delete vs Soft Delete â†’ í˜„ìž¬ ìƒíƒœ vs ì´ë ¥ ë³´ì¡´
2. **ì¤‘ë³µ ì²˜ë¦¬** â€” 409 vs 200 â†’ HTTP ì˜ë¯¸ë¡  vs í´ë¼ì´ì–¸íŠ¸ íŽ¸ì˜ì„±
3. **ë”°ë‹¥ ë°©ì§€** â€” Redis SETNX â†’ Service ì²´í¬ â†’ DB UK 3ì¤‘ ë°©ì–´
4. **ìƒíƒœ ë¶„ë¦¬** â€” status Ã— displayYn â†’ 'ë³´ì´ì§€ë§Œ êµ¬ë§¤ ë¶ˆê°€'ë¥¼ í‘œí˜„

ì²˜ìŒì— 'INSERT/DELETEë©´ ë˜ì§€'ë¼ê³  ìƒê°í•œ ê²Œ ë¶€ë„ëŸ¬ìš´ ê±´ ì•„ë‹Œë°, íŒŒê³ ë“¤ìˆ˜ë¡ íŒë‹¨ì˜ ì—°ì†ì´ì—ˆë‹¤. ê°ê°ì— 'ì •ë‹µ'ì´ ìžˆë‹¤ê¸°ë³´ë‹¤ëŠ” ìƒí™©ì— ë”°ë¼ íŠ¸ë ˆì´ë“œì˜¤í”„ê°€ ë‹¬ë¼ì§€ëŠ” ê±°ê³ .

ì„¤ê³„ ì£¼ì°¨ë¼ ì½”ë“œëŠ” ì•ˆ ì§°ì§€ë§Œ, ì´ëŸ° ê³ ë¯¼ë“¤ì„ ë¨¼ì € í•´ë‘ë‹ˆê¹Œ êµ¬í˜„í•  ë•Œ ëœ í—¤ë§¬ ê²ƒ ê°™ë‹¤. ì•„ë§ˆ.

> ì¢‹ì•„ìš” ë²„íŠ¼ ëˆ„ë¥´ëŠ” ê±´ 1ì´ˆ. ê·¸ ë’¤ë¥¼ ì„¤ê³„í•˜ëŠ” ê±´ í•˜ë£¨ê°€ ë„˜ê²Œ ê±¸ë ¸ë‹¤.
{: .prompt-tip }
